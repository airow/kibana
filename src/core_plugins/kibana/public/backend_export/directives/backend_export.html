<div class="row">
  <div class="col-md-11">
    <div class="table-responsive">
      <table class="table table-hover" style="margin-bottom:0px;">
        <thead>
          <tr>
            <th>#</th>
            <th class="hidden-xs hidden-sm">索引</th>
            <th>任务Id</th>
            <th>开始时间</th>
            <th>记录数</th>
            <th>状态</th>
            <th>百分比</th>
          </tr>
        </thead>
        <tbody>
          <tr ng-repeat="task in exportList">
            <th scope="row">{{finder.pageIndex*5+($index+1)}}</th>
            <td class="hidden-xs hidden-sm">{{task.TargetIndex}}</td>
            <td>{{task.ID}}
              <a ng-if='task.CancelFlag!=1 && task.Status===2' target="_black" ng-href="{{finder.makeUrl(task)}}">
                <span class="glyphicon glyphicon-download-alt" aria-hidden="true"></span>
              </a>
            </td>
            <td>{{finder.fomartDate(task)}}</td>
            <td>{{task.TotalCount}}</td>
            <td>
              <div style="color: coral;" ng-if='task.CancelFlag==1'>
                任务取消
              </div>
              <div ng-if='task.CancelFlag!==1' ng-switch="task.Status">
                <div ng-switch-when="0">
                  <div ng-if='task.exeCancel!=1'>
                    新建<span class="fa fa-close" ng-click='task.exeCancel=1' aria-hidden="true"></span>
                  </div>
                  <div ng-if='task.exeCancel==1'>
                    取消导出?
                    <button type="button" ng-click="finder.cancelTask(task)" class="btn btn-primary btn-xs">是</button>
                    <button type="button" ng-click="task.exeCancel=null" class="btn btn-xs">否</button>
                  </div>
                </div>
                <div ng-switch-when="1">
                  <div ng-if='task.exeCancel!=1'>
                    导出中<span class="fa fa-close" ng-click='task.exeCancel=1' aria-hidden="true"></span>
                  </div>
                  <div ng-if='task.exeCancel==1'>
                    取消导出?
                    <button type="button" ng-click="finder.cancelTask(task)" class="btn btn-primary btn-xs">是</button>
                    <button type="button" ng-click="task.exeCancel=null" class="btn btn-xs">否</button>
                  </div>
                </div>
                <div ng-switch-when="2">
                  导出完成
                </div>
                <div ng-switch-when="-1">
                  <i tooltip="{{task.ErrorMsg}}" tooltip-append-to-body="1" class="fa fa-exclamation">导出出错</i>
                </div>
              </div>
            </td>
            <td>
              <div class="progress" style="margin-bottom: 0px;">
                <div class="progress-bar" role="progressbar" aria-valuenow="{{task.DonePercent}}" aria-valuemin="0" aria-valuemax="100" style="min-width: 2em;padding-top:5px; width: {{task.DonePercent}}%;">
                  {{task.DonePercent - (task.CancelFlag==1 && task.Status===2 ? 0.5 : 0) }}%
                </div>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
      <nav aria-label="Page navigation" ng-if='totalPageNum>0'>
        <ul class="pagination" style="margin:0px;">
          <li ng-class="{'disabled' : finder.pageIndex<=0}" ng-if2="finder.pageIndex>0">
            <a aria-label="Previous">
              <span ng-click="finder.previous()" aria-hidden="true">&laquo;</span>
            </a>
          </li>
          <li><a>{{finder.pageIndex+1}}/{{totalPageNum}}</a></li>
          <li ng-class="{'disabled' : finder.pageIndex+1>=totalPageNum}" ng-if2="finder.pageIndex+1<totalPageNum">
            <a aria-label="Next">
              <span ng-click="finder.next()" aria-hidden="true">&raquo;</span>
            </a>
          </li>
        </ul>
      </nav>
      <div ng-if="false" class="btn-group" role="group" aria-label="...">
        <button type="button" class="btn btn-default" ng-if="finder.pageIndex>0" ng-click="finder.pageIndex=finder.pageIndex-1;finder.query()">上一页</button>
        <button type="button" class="btn btn-default">{{finder.pageIndex+1}}/{{totalPageNum}}</button>
        <button type="button" class="btn btn-default" ng-if="finder.pageIndex+1<totalPageNum" ng-click="finder.pageIndex=finder.pageIndex+1;finder.query()">下一页</button>
      </div>
    </div>
  </div>
  <div class="col-md-1">
    <div class="btn-group-vertical hidden-xs hidden-sm" role="group" aria-label="...">
      <button type="button" class="btn" ng-class="{'btn-default':false==finder.hideCancelTask}" ng-click="finder.hideCancelTask=!finder.hideCancelTask;finder.query()">含取消</button>
      <button type="button" class="btn btn-default" ng-click="finder.export()">快速</button>
      <button type="button" class="btn btn-default" ng-click="finder.backendexport()">全部</button>
      <button type="button" class="btn btn-default" ng-click="finder.query()">刷新</button>
    </div>
    <div class="btn-group visible-xs visible-sm" role="group" aria-label="...">
      <button type="button" class="btn" ng-class="{'btn-default':false==finder.hideCancelTask}" ng-click="finder.hideCancelTask=!finder.hideCancelTask;finder.query()">含取消</button>
      <button type="button" class="btn btn-default" ng-click="finder.export()">快速</button>
      <button type="button" class="btn btn-default" ng-click="finder.backendexport()">全部</button>
      <button type="button" class="btn btn-default" ng-click="finder.query()">刷新</button>
    </div>
  </div>
</div>
